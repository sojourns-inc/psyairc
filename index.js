const{Client:a}=require('irc-framework'),b=require('node-fetch'),c=require('dotenv');c.config();const d=new a,e='##drugs';d.connect({host:'irc.libera.chat',port:6667,nick:'psypup',username:'psypup',realname:'PsyPup Harm Redux Bot'}),d.on('registered',()=>{d.join(e),console.log(`Joined channel ${e}`)}),d.on('message',async(a)=>{const{message:c,target:f,nick:g}=a;if(f===e&&c.startsWith('@arf')){const a=c.slice(4).trim();if(a.length>0){const c=await(async(a,c='openai-next',d=0,e=100)=>{try{return await b(`${process.env.BASE_URL_BETA}/q`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question:`${a}\n\nRespond in a single sentence.`,temperature:d,tokens:e,drug:!1,model:c,version:'v2'})})}catch(a){return console.error(`Error in fetchQuestionFromPsyAI: ${a}`),null}})(a);if(c){const a=await c.json();d.say(f,`${g}: ${a.assistant}`)}else d.say(f,`${g}: Sorry, I couldn't process that request.`)}else d.say(f,`${g}: Please provide a query after the command.`)}}),d.on('error',a=>{console.error('IRC Error:',a)})